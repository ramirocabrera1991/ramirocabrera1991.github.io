import{_ as O}from"./NavBar-N9hffaWG.js";import{D as w}from"./index-kzi-XDgH.js";import{_ as P,r as n,e as B,f as E,g as y,h as M,i as c,c as x,a as l,d as s,j as u,u as g,n as R,o as V,t as D,q as j,p as H,b as q}from"./index-KQTsTaLX.js";const I=v=>(H("data-v-80d16956"),v=v(),q(),v),Y={class:"formulario"},z=I(()=>s("label",{class:"arc-text"},"CONSULTAR FACTURAS",-1)),G=I(()=>s("br",null,null,-1)),J=I(()=>s("br",null,null,-1)),K={class:"card-popup"},Q={key:0,class:"card-popup"},W={class:"formulario"},X={__name:"InvoiceView",setup(v){const h=n(""),f=n(!0),d=n(!1),p=n(new Date),F=[{title:"Numero Factura",key:"idInvoice"},{title:"Cliente",key:"customer.customerName"},{title:"Total",key:"total"},{title:"Fecha",key:"date"},{title:"Usuario",key:"user.userName"},{title:"Ver Detalle",key:"actions"}],N=[{title:"Codigo",key:"idItemInvoice"},{title:"Producto",key:"name"},{title:"Cantidad",key:"quantity"},{title:"Precio Unitario",key:"unitPrice"},{title:"SubTotal",key:"unitPrice*quantity"}],m=B([]);let i=n(!1);const r=n({idInvoice:0,date:"",total:0});n("");const A=()=>{m.splice(0),y.getInvoicesForUserAndDate(p.value).then(t=>{switch(t.status){case 200:t.data.forEach(e=>{e.date=U(e.date),e.total=e.total==null?0:e.total,m.push(e)}),f.value=!1}}).catch(t=>{console.log(t.message)}),d.value=!1};E(()=>{if(y.getUserLogged().id=="")return M.push("/");y.getInvoicesForUserAndDate(p.value).then(e=>{switch(e.status){case 200:e.data.forEach(a=>{a.date=U(a.date),a.total=a.total==null?0:a.total,m.push(a)}),f.value=!1}}).catch(e=>{console.log(e.message)})});const $=()=>{d.value=!d.value},T=(t,e,a)=>t!=null&&e!=null&&typeof t=="string"&&(t.toString().toLocaleUpperCase().indexOf(e)!==-1||t.toString().toLocaleLowerCase().indexOf(e)!==-1),L=t=>{r.value=t,i.value=!0},U=t=>{const e=new Date(t),a=String(e.getDate()).padStart(2,"0"),b=String(e.getMonth()+1).padStart(2,"0"),k=e.getFullYear(),S=String(e.getHours()).padStart(2,"0"),C=String(e.getMinutes()).padStart(2,"0"),_=String(e.getSeconds()).padStart(2,"0");return`${a}/${b}/${k} ${S}:${C}:${_}`};return(t,e)=>{const a=c("v-text-field"),b=c("v-date-picker"),k=c("v-row"),S=c("v-container"),C=c("v-btn"),_=c("v-data-table-virtual");return V(),x("div",null,[l(O),s("div",Y,[z,G,l(_,{"custom-filter":T,search:h.value,class:"elevation-1",loading:f.value,"loading-text":"Cargando, por favor espere...",style:{"background-color":"rgba(19, 35, 47, 0.9)",color:"white"},headers:F,items:m,height:"400px","item-value":"name"},{top:u(()=>[l(a,{modelValue:h.value,"onUpdate:modelValue":e[0]||(e[0]=o=>h.value=o),label:"Buscar Cliente o Usuario",class:"pa-2"},null,8,["modelValue"]),s("button",{class:"btn",onClick:e[1]||(e[1]=o=>$())},"Filtrar por fecha"),J,l(g(w),{visible:d.value,"onUpdate:visible":e[4]||(e[4]=o=>d.value=o),title:"Seleccione una fecha"},{default:u(()=>[s("div",K,[l(S,null,{default:u(()=>[l(k,{justify:"space-around"},{default:u(()=>[l(b,{elevation:"24",modelValue:p.value,"onUpdate:modelValue":e[2]||(e[2]=o=>p.value=o),onClick:e[3]||(e[3]=o=>A())},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1},8,["visible"])]),"item.actions":u(({item:o})=>[l(C,{icon:"mdi-file-eye",variant:"plain",onClick:Z=>L(o)},null,8,["onClick"])]),_:1},8,["search","loading","items"])]),l(g(w),{visible:g(i),"onUpdate:visible":e[5]||(e[5]=o=>R(i)?i.value=o:i=o),title:"FACTURA NÂ°: "+r.value.idInvoice+"- FECHA: "+r.value.date},{default:u(()=>[g(i)?(V(),x("div",Q,[s("p",null,"Cliente Nombre: "+D(r.value.customer.customerName),1),s("p",null,"TOTAL: "+D(r.value.total),1),s("div",W,[l(_,{style:{"background-color":"rgba(19, 35, 47, 0.9)",color:"white"},headers:N,items:r.value.listItemsInvoice,height:"400px","item-value":"name"},null,8,["items"])])])):j("",!0)]),_:1},8,["visible","title"])])}}},ae=P(X,[["__scopeId","data-v-80d16956"]]);export{ae as default};
