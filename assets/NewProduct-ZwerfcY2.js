import{_ as T,r as l,f as G,g as U,h as S,i as n,c as v,a,j as o,o as p,s as $,l as d,d as y,F as z,k as H,t as R,p as J,b as K}from"./index-OVX5MFhI.js";import{_ as W}from"./NavBar-_yDaPA0z.js";const k=_=>(J("data-v-389d8958"),_=_(),K(),_),X=k(()=>y("label",{class:"arc-text"},"NUEVO PRODUCTO",-1)),Y=k(()=>y("br",null,null,-1)),Z={key:0},ee=k(()=>y("p",null,"Cantidad - Material",-1)),ae={key:1},te={__name:"NewProduct",setup(_){const s=l(""),f=l(0),g=l(1),V=l(1),i=l(""),P=l([]),r=l([]),h=l([]),b=l(1),M=l(!1),w=l("");G(()=>{if(U.getUserLogged().id=="")return S.push("/");U.getMeasurementUnit().then(e=>{switch(e.status){case 200:P.value=e.data}}).catch(e=>{console.log(e.message)}),U.getAllRawMaterial().then(e=>{switch(e.status){case 200:h.value=e.data,h.value.length==0&&(alert("Debe agregar primero materiales."),S.push("/newRawMaterial"))}}).catch(e=>{console.log(e.message)})});const q=()=>{M.value=!0},x=()=>{M.value=!1},F=()=>{const u=r.value.find(e=>e.rawMaterial.idRawMaterial==w.value.idRawMaterial);if(u)u.quantity+=b.value;else{const e={idMaterialForProduct:null,quantity:b.value,rawMaterial:w.value};r.value.push(e)}x()},N=()=>{if(s.value==""){alert("Por favor, complete la descripción del producto.");return}else if(i.value==""){alert("Por favor, complete una unidad de medida.");return}const u={idProduct:null,name:s.value,stock:f.value,unitPrice:g.value,cost:V.value,measurementUnit:i.value.toLocaleUpperCase(),listMaterialForProduct:r.value,state:!0};U.newProduct(u).then(e=>{switch(e.status){case 200:alert("Producto guardado con exito"),I()}}).catch(e=>{console.log(e.message)})},I=()=>{s.value="",f.value=0,g.value=1,V.value=1,i.value="",P.value=[]},D=u=>{r.value.splice(u,1)};return(u,e)=>{const c=n("v-text-field"),C=n("v-autocomplete"),m=n("v-btn"),L=n("v-card-title"),j=n("v-card-text"),A=n("v-card-actions"),B=n("v-card"),O=n("v-dialog"),E=n("v-form"),Q=n("v-sheet");return p(),v("div",null,[a(W),a(Q,{class:"mx-auto"},{default:o(()=>[X,Y,a(E,{"fast-fail":"",onSubmit:e[8]||(e[8]=$(()=>{},["prevent"]))},{default:o(()=>[a(c,{modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=t=>s.value=t),label:"Descripción",rules:[()=>!!s.value||"Se requiere este campo"],required:""},null,8,["modelValue","rules"]),a(c,{modelValue:f.value,"onUpdate:modelValue":e[1]||(e[1]=t=>f.value=t),type:"number",min:"0",label:"Stock"},null,8,["modelValue"]),a(c,{modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=t=>g.value=t),type:"number",min:"1",label:"Precio Unitario"},null,8,["modelValue"]),a(c,{modelValue:V.value,"onUpdate:modelValue":e[3]||(e[3]=t=>V.value=t),type:"number",min:"1",label:"Costo"},null,8,["modelValue"]),a(C,{modelValue:i.value,"onUpdate:modelValue":e[4]||(e[4]=t=>i.value=t),items:P.value,label:"Unidad de Medida",placeholder:"Seleccionar una unidad de medida","item-title":"measurementUnit","item-value":"description","return-object":""},null,8,["modelValue","items"]),a(m,{class:"btn",onClick:q},{default:o(()=>[d("Agregar materiales")]),_:1}),a(O,{modelValue:M.value,"onUpdate:modelValue":e[7]||(e[7]=t=>M.value=t),persistent:"","max-width":"400px"},{default:o(()=>[a(B,null,{default:o(()=>[a(L,null,{default:o(()=>[d("Ingrese la cantidad")]),_:1}),a(j,null,{default:o(()=>[a(c,{modelValue:b.value,"onUpdate:modelValue":e[5]||(e[5]=t=>b.value=t),label:"Cantidad",type:"number"},null,8,["modelValue"]),a(C,{modelValue:w.value,"onUpdate:modelValue":e[6]||(e[6]=t=>w.value=t),items:h.value,label:"Lista de materiales",placeholder:"Seleccione un material","item-title":"name","item-value":"idRawMaterial","return-object":""},null,8,["modelValue","items"])]),_:1}),a(A,null,{default:o(()=>[a(m,{class:"btn",onClick:F},{default:o(()=>[d("Agregar")]),_:1}),a(m,{class:"btn",onClick:x},{default:o(()=>[d("Cancelar")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),y("div",null,[r.value.length>0?(p(),v("ul",Z,[ee,(p(!0),v(z,null,H(r.value,t=>(p(),v("li",{key:t.rawMaterial.idRawMaterial},[d(R(t.quantity)+" - "+R(t.rawMaterial.name)+" ",1),a(m,{icon:"mdi-delete-outline",variant:"plain",onClick:D,color:"white"})]))),128))])):(p(),v("p",ae,"No hay materiales asignados."))]),a(m,{class:"btn",onClick:N,block:""},{default:o(()=>[d("Guardar")]),_:1})]),_:1})]),_:1})])}}},ne=T(te,[["__scopeId","data-v-389d8958"]]);export{ne as default};
