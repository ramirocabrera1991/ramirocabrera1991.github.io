import{x as I,r as w,e as v,y as V,z as o}from"./index-luPr5Kok.js";function B(e){return typeof e=="boolean"}function L(e){return typeof e=="number"}function C(e){return typeof e=="object"&&e!==null}const D=I({props:{visible:[Object,Boolean],name:String,mask:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},type:{type:String,default:""},modalClass:{type:String,default:"modal-vue3-wrap"},width:{type:[String,Number],default:500},offsetTop:{type:[String,Number],default:100},zIndex:{type:[String,Number],default:1e3},title:{type:String,default:"Title"},animation:{type:Boolean,default:!0},closable:{type:Boolean,default:!0},draggable:{type:[Boolean,Object],default:!1},cancelButton:{type:Object,default:()=>({text:"cancel",onclick:null,loading:!1})},okButton:{type:Object,default:()=>({text:"ok",onclick:null,loading:!1})}},setup(e,{slots:$,emit:g}){let m;const d=e.name,H=typeof e.width=="string"?e.width:`${e.width}px`,M=typeof e.offsetTop=="string"?e.offsetTop:`${e.offsetTop}px`,j=w(null),s=w(null);let z=null,f=null,a=v({init:-15,value:-15,max:0,step:1,speed:10,linear:!1}),x=v({init:0,value:0,max:360,step:30,speed:30,linear:!0});const b=(t,n,r)=>{let k=n?t.max:t.init,p=n?t.init:t.max;if(n?t.value<=p:t.value>=p)return t.linear?t.value=k:(t.value=p,r&&r()),!1;setTimeout(()=>{n?t.value-=t.step:t.value+=t.step},t.speed)},h=t=>{t&&m.list.length>0&&C(e.visible)?m.trigger(t,!1):g("update:visible",!1)},O=t=>{!e.maskClosable||!e.mask||t.target===j.value&&h(d)};let l=v({value:!1,target:""});const E=(t,n)=>{const r=t[n];(!r.loading||r.loading&&!l.value)&&(r.onclick&&typeof r.onclick=="function"?r.onclick():h(t.name),r.loading&&(l.value=!0,l.target=n))},i=w(),u=v({left:void 0,top:void 0}),y=t=>{t.preventDefault(),t.stopPropagation()},S=t=>{let n=s.value.offsetLeft,r=s.value.offsetTop,k={width:s.value.offsetWidth,height:s.value.offsetHeight,clientWidth:document.documentElement.clientWidth,clientHeight:document.documentElement.clientHeight,x:t.pageX-n,y:t.pageY-r};i.value=k,y(t);const p=c=>{if(!i.value)return;let W=c.pageX,N=c.pageY;u.left=Math.min(Math.max(W-i.value.x,0),i.value.clientWidth-i.value.width),u.top=Math.min(Math.max(N-i.value.y,0),i.value.clientHeight-i.value.height),y(c)},T=c=>{!i.value||(i.value=void 0,y(c),document.removeEventListener("pointermove",p),document.removeEventListener("pointerup",T))};document.addEventListener("pointermove",p),document.addEventListener("pointerup",T)};return V(()=>e.draggable,t=>{C(t)&&t.addEventListener("pointerdown",S)}),()=>{if($.default){let t;return B(e.visible)?t=e.visible:(t=e.visible.currVisible[d],m=e.visible.dep),t?(l.value&&b(x),e.animation===!1?a.value=a.max:(z!=d&&(z=d,a.value=a.init),a.speed=5,b(a)),a.value>=a.max&&!i.value&&f!=d&&(f=d,g("onVisible"))):(f==d||!d)&&(e.animation===!1?t=!1:(t=!0,a.speed=2,b(a,!0,()=>{t=!1,f=null,l.value=!1,g("onUnVisible")}))),t?o("div",{class:e.modalClass},[e.mask?o("div",{class:"modal-vue3-mask",style:`width:100%;height:100%;position:fixed;left:0;top:0;background-color:rgba(0, 0, 0, 0.25);z-index:${e.zIndex-1};`}):null,o("div",{ref:j,style:`position:fixed;left:0;right:0;top:0;bottom:0;margin: 0 auto;z-index:${e.zIndex};overflow:auto;outline:0;`,onclick:n=>{O(n)}},[o("div",{ref:s,class:"modal-vue3-content",style:`width:${H};position:relative;top:${L(u.top)?u.top+"px":M};left:${u.left?u.left+"px":""};margin: ${L(u.left)?"0":"0 auto"}; ${e.type!="clean"?"border:1px solid #f0f0f0;":""}overflow:auto;outline:0;box-sizing:border-box; ${e.type!="clean"?"background-color:#fff;":""}border-radius:2px;transform:translateY(${a.value}px);`},[e.type!="clean"?o("div",{class:"modal-vue3-header",style:`padding:12px 22px;border-bottom:1px solid #f0f0f0;position:relative;${e.draggable&&B(e.draggable)?"cursor:move;":""}`,onpointerdown:e.draggable&&B(e.draggable)?S:null},[o("div",null,e.title),e.closable?o("div",{style:"width:20px;height:16px;cursor:pointer;position:absolute;top:15px;right:15px;font-size: 20px;",onclick:()=>{h(d)}},[o("div",{style:"width:14px;height:1px;position:absolute;left:0;right:0;top:0;bottom:0;margin:auto;background-color:#999;transform:rotate(45deg);"},""),o("div",{style:"width:14px;height:1px;position:absolute;left:0;right:0;top:0;bottom:0;margin:auto;background-color:#999;transform:rotate(-45deg);"},"")]):null]):null,o("div",{class:"modal-vue3-body",style:e.type!="clean"?"padding: 14px 22px":""},$.default()),e.type!="clean"?o("div",{class:"modal-vue3-footer",style:"padding: 12px 22px;display:flex;justify-content:flex-end;align-items:center;border-top:1px solid #f0f0f0;"},[o("div",{class:"modal-vue3-footer-cancel",style:`margin-right: 20px;height:30px;padding:0 8px;border-radius:2px;border: 1px solid #d9d9d9;display:flex;justify-content:center;align-items:center;cursor:pointer;position:relative;${l.value&&l.target==="cancelButton"?"opacity:.6;":""}`,onclick:()=>{E(e,"cancelButton")}},[l.value&&l.target==="cancelButton"?o("span",{style:`width: 10px;height:10px;margin-right:5px;border:1px solid #666;border-radius:50%;border-top:1px solid transparent; transform:rotate(${x.value}deg);`}):null,o("div",{style:"min-width:44px;text-align:center;"},e.cancelButton.text||"cancel")]),o("div",{class:"modal-vue3-footer-ok",style:`height:30px;padding: 0 8px;border-radius:2px;display:flex;justify-content:center;align-items:center;background-color:#4395ff;color:#fff;cursor:pointer;position:relative;${l.value&&l.target==="okButton"?"opacity:.6;":""}`,onclick:()=>{E(e,"okButton")}},[l.value&&l.target==="okButton"?o("span",{style:`width: 10px;height:10px;margin-right:5px;border:1px solid #fff;border-radius:50%;border-top:1px solid transparent; transform:rotate(${x.value}deg);`}):null,o("div",{style:"min-width:44px;text-align:center;"},e.okButton.text||"ok")])]):null])])]):null}}}});export{D};
